<!DOCTYPE html>
<html lang="en">
<head><head>
    <meta name="google-site-verification" content="9vIieCe-Qpd78QOmBl63rGtIVbhY6sYyuxX3j8XWBA4" />
    <meta name="baidu-site-verification" content="LRrmH41lz7" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="使用PHP发送邮件">
    
    <meta name="keyword"  content="Redis, Go, 微服务, PHP, Git, Bash">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>PHP专业笔记（六十四）-怀府风的博客 | Arvin&#39;s Blog</title>

    <link rel="canonical" href="/2019/06/post/php-section-64.html">

    <link rel="stylesheet" href="/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="/css/syntax.css">

    
    <link rel="stylesheet" href="/css/zanshang.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
    
    <script src="/js/jquery.min.js"></script>
    
    
    <script src="/js/bootstrap.min.js"></script>
    
    
    <script src="/js/hux-blog.min.js"></script>
</head>
</head>

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">怀府小阁</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">首页</a>
                    </li>
                    
                    <li>
                        <a href="/categories/go">go</a>
                    </li>
                    
                    <li>
                        <a href="/categories/java">java</a>
                    </li>
                    
                    <li>
                        <a href="/categories/php">php</a>
                    </li>
                    
                    <li>
                        <a href="/categories/%E5%B7%A5%E5%85%B7">工具</a>
                    </li>
                    
                    <li>
                        <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a>
                    </li>
                    
                    <li>
                        <a href="/categories/%E9%9A%8F%E7%AC%94">随笔</a>
                    </li>
                    

                    
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header{
        background-image: url('/img/head_bg.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                       
                       <a class="tag" href="/tags/php" title="PHP">
                           PHP
                        </a>
                       
                    </div>
                    <h1>PHP专业笔记（六十四）</h1>
                    <h2 class="subheading"></h2>
                    <span  class="meta">Posted by 怀府风 on Monday, June 3, 2019
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

        		
                        <header>
                        <h2>TOC</h2>
                        </header>
                        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#使用php发送邮件">使用PHP发送邮件</a>
<ul>
<li><a href="#1-发送邮件-基础-更详细和完整的例子">1. 发送邮件 - 基础，更详细和完整的例子</a></li>
<li><a href="#2-mail-发送html邮件">2. mail()发送HTML邮件</a></li>
<li><a href="#3-使用mail-发送附件">3. 使用mail()发送附件</a></li>
<li><a href="#4-phpmailer发送纯文本文件">4. PHPMailer发送纯文本文件</a></li>
<li><a href="#5-phpmailer发送html邮件">5. PHPMailer发送HTML邮件</a></li>
<li><a href="#5-phpmailer发送附件邮件">5. PHPMailer发送附件邮件</a></li>
<li><a href="#7-使用sendgrid发送文本邮件">7. 使用Sendgrid发送文本邮件</a></li>
<li><a href="#7-sendgrid发送附件邮件">7. Sendgrid发送附件邮件</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        		
        		

<h2 id="使用php发送邮件">使用PHP发送邮件</h2>

<table>
<thead>
<tr>
<th>参数</th>
<th>想去</th>
</tr>
</thead>

<tbody>
<tr>
<td>string $to</td>
<td>收件人地址</td>
</tr>

<tr>
<td>string $subject</td>
<td>邮件主题行</td>
</tr>

<tr>
<td>string $message</td>
<td>邮件主题</td>
</tr>

<tr>
<td>string $additional_headers</td>
<td>可选：邮件头信息</td>
</tr>

<tr>
<td>string $adaitional_parameters</td>
<td>可选：在命令行中传递给配置的邮件发送应用程序的参数</td>
</tr>
</tbody>
</table>

<h3 id="1-发送邮件-基础-更详细和完整的例子">1. 发送邮件 - 基础，更详细和完整的例子</h3>

<p>一个典型的邮件包含下面3个主要部分：</p>

<ol>
<li>一个收件人（是一个邮件地址）</li>
<li>一个主题</li>
<li>一个信息主题</li>
</ol>

<p>在PHP中发送邮件很简单，只需要调用<code>mail()</code>方法。<code>mail()</code>接受5个参数，但是只有前3个是发送一个邮件所需要的（尽管像下面显示的这四个参数是常用的）。前开始的3个参数：</p>

<ol>
<li>收件人的地址(字符串)</li>
<li>邮件的主题(字符串)</li>
<li>邮件的主题(字符串)（邮件的内容）</li>
</ol>

<p>最简单的例子像下面一样：</p>

<pre><code class="language-php"> mail('recipient@example.com', 'Email Subject', 'This is the email message body');
</code></pre>

<p>上面的简单例子在有限的环境下（如内部硬编码的报警邮件）是正常工作的。但是通常将放入<code>mail()</code>的内容放到一个变量中，这样让代码更加清晰，便于管理（例如，从表单提交中动态创建邮件内容）。</p>

<p>例如，<code>mail()</code>接受第四个参数，允许在邮件中发送更多的邮件头。你可以设置下面的头信息：</p>

<ul>
<li><code>From</code>名称和邮件地址，用户将会看到的</li>
<li>用户回复将会发送到的<code>Rely-To</code>邮件地址</li>
<li>额外的非标准头信息：<code>X-Mailer</code>向收件人说明邮件是通过PHP发送的</li>
</ul>

<pre><code class="language-php">$to = 'recipient@example.com';
$subject = 'Email Subject';
$message = 'This is the email message body';
$headers = implode(&quot;\r\n&quot;, [
    'From: John Conde &lt;webmaster@example.com&gt;', 
    'Reply-To: webmaster@example.com', 
    'X-Mailer: PHP/' . PHP_VERSION
]);
</code></pre>

<p>额外的第五个参数可以被用来向命令行选项一样设置发送邮件时使用的配置选项，在<code>sendmail_path</code>中定义的配置。例如，当使用<code>sendmail/postfix</code>的<code>-f</code>选项时，可以设置信封发送人地址。</p>

<pre><code class="language-php">$fifth = '-fno-reply@example.com';
</code></pre>

<p>尽管使用<code>mail()</code>发送邮件时很可靠的，但是不能保证调用<code>mail()</code>的时候，邮件就发送成功。想要查看邮件发送的时候释放有错误，可以查询<code>mail()</code>的返回值。当邮件成功投递发送的之后，你会获取一个<code>TRUE</code>，否则会获取<code>FALSE</code>。</p>

<pre><code class="language-php">$result = mail($to, $subject, $message, $headers, $fifth);
</code></pre>

<p><strong>注意：</strong>尽管<code>mail()</code>返回TRUE，但是这并不意味着邮件被发送了，或者邮件被收件人接受了。它只表示邮件已成功移交到系统的邮件系统。</p>

<p>如果你想发送一个HTML邮件，并不需要做非常多的额外工作：</p>

<ol>
<li>添加<code>MIME-Version</code>头</li>
<li>添加<code>Conent-Type</code>头</li>
<li>确保你的邮件内容是HTML的</li>
</ol>

<pre><code class="language-php">$to = 'recipient@example.com';
$subject = 'Email Subject';
$message = '&lt;html&gt;&lt;body&gt;This is the email message body&lt;/body&gt;&lt;/html&gt;'; 
$headers = implode(&quot;\r\n&quot;, [
		'From: John Conde &lt;webmaster@example.com&gt;', 
    'Reply-To: webmaster@example.com', 
    'MIME-Version: 1.0',
    'Content-Type: text/html; charset=ISO-8859-1', 
    'X-Mailer: PHP/' . PHP_VERSION
]);
</code></pre>

<p>下面是PHP的<code>mail()</code>方法的完整例子：</p>

<pre><code class="language-php">&lt;?php
//测试工具，只在开发环境开启
error_reporting(-1);
ini_set('display_errors', 'On');
set_error_handler(&quot;var_dump&quot;);

//设置一些特殊的配置选项
ini_set(&quot;mail.log&quot;, &quot;/tmp/mail.log&quot;); 
ini_set(&quot;mail.add_x_header&quot;, TRUE);

// 邮件内容
$to = 'recipient@example.com';
$subject = 'Email Subject';
$message = 'This is the email message body'; 
$headers = implode(&quot;\r\n&quot;, [
    'From: webmaster@example.com', 
    'Reply-To: webmaster@example.com', 
    'X-Mailer: PHP/' . PHP_VERSION
]);

//发送邮件
$result = mail($to, $subject, $message, $headers); 

//检查邮件发送结果
if ($result) {
    //成功跳转到结果页。 
    header('Location: http://example.com/path/to/thank-you.php', true, 303);
    exit;
}else {
    //失败进行错误处理
}
</code></pre>

<p>查看更多的信息</p>

<p>官方文档</p>

<ul>
<li><a href="https://www.php.net/manual/zh/function.mail.php">mail()</a></li>
<li><a href="https://www.php.net/manual/zh/mail.configuration.php">PHP mail()的配置</a></li>
</ul>

<p>相关的Stack Overflow 问题</p>

<ul>
<li><a href="https://stackoverflow.com/questions/24644436/php-mail-function-doesnt-complete-sending-of-e-mail">PHP的mail form没有完成发送邮件</a></li>
<li><a href="https://stackoverflow.com/questions/371/how-do-you-make-sure-email-you-send-programmatically-is-not-automatically-marked">怎么确保你程序发送的邮件不被标记为垃圾邮件</a></li>
<li><a href="https://stackoverflow.com/questions/15965376/how-to-configure-xampp-to-send-mail-from-localhost/18185233#18185233">怎么使用STMP发送邮件</a></li>
<li><a href="https://stackoverflow.com/questions/5666312/php-mail-issue-with-www-data/5666682#5666682">设置发送地址信封</a></li>
</ul>

<p>可选的邮件封装</p>

<ul>
<li><a href="https://github.com/Synchro/PHPMailer">PHPMailer</a></li>
<li><a href="http://swiftmailer.org/">SwiftMailer</a></li>
<li><a href="https://pear.php.net/package/Mail">PEAR::Mail</a></li>
</ul>

<p>邮件服务器</p>

<ul>
<li><a href="http://www.pmail.com/overviews/ovw_mercury.htm">Mercury Mail(Windows)</a></li>
</ul>

<h3 id="2-mail-发送html邮件">2. mail()发送HTML邮件</h3>

<pre><code class="language-php">&lt;?php
$to      = 'recipent@example.com';
$subject = 'Sending an HTML email using mail() in PHP';
$message = '&lt;html&gt;&lt;body&gt;&lt;p&gt;&lt;b&gt;This paragraph is bold.&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;This text is
italic.&lt;/i&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;';

$headers = implode(&quot;\r\n&quot;, [
    &quot;From: John Conde &lt;webmaster@example.com&gt;&quot;, 
    &quot;Reply-To: webmaster@example.com&quot;, 
    &quot;X-Mailer: PHP/&quot; . PHP_VERSION, &quot;MIME-Version: 1.0&quot;,
    &quot;Content-Type: text/html; charset=UTF-8&quot;
]);

mail($to, $subject, $message, $headers);
</code></pre>

<p>这和文本邮件没有太大的不同。主要的不同是邮件的内容是HTML格式的并且有两个额外的头信息必须添加到邮件中，以便邮件客户端安装HTML来处理这个邮件。两个头信息是：</p>

<ul>
<li>MIME-Version: 1.0</li>
<li>Content-Type: text/html; charset=UTF-8</li>
</ul>

<h3 id="3-使用mail-发送附件">3. 使用mail()发送附件</h3>

<pre><code class="language-php">&lt;?php
$to    = 'recipient@example.com'; 
$subject = 'Email Subject'; 
$message = 'This is the email message body';

$attachment = '/path/to/your/file.pdf';
$content = file_get_contents($attachment);

/* Attachment content transferred in Base64 encoding MUST be split into chunks 76 characters in length as specified by RFC 2045 section 6.8. By default, the function chunk_split() uses a chunk length of 76 with a trailing CRLF (\r\n). The 76 character requirement does not include the carriage return and line feed */ 
$content = chunk_split(base64_encode($content));

/* Boundaries delimit multipart entities. As stated
in RFC 2046 section 5.1, the boundary MUST NOT occur
in any encapsulated part. Therefore, it should be
unique. As stated in the following section 5.1.1, a
boundary is defined as a line consisting of two hyphens
(&quot;--&quot;), a parameter value, optional linear whitespace,
and a terminating CRLF. */
$prefix = &quot;part_&quot;; // This is an optional prefix

/* Generate a unique boundary parameter value with our prefix using the uniqid() function. The second parameter makes the parameter value more unique. */
$boundary = uniqid($prefix, true);

// headers
$headers = implode(&quot;\r\n&quot;, [
    'From: webmaster@example.com',
    'Reply-To: webmaster@example.com', 
    'X-Mailer: PHP/' . PHP_VERSION, 'MIME-Version: 1.0',
    // boundary parameter required, must be enclosed by quotes
    'Content-Type: multipart/mixed; boundary=&quot;' . $boundary . '&quot;', 
    &quot;Content-Transfer-Encoding: 7bit&quot;,
    &quot;This is a MIME encoded message.&quot; // message for restricted transports
]);

// message and attachment
$message = implode(&quot;\r\n&quot;, [
    &quot;--&quot; . $boundary, // header boundary delimiter line
    'Content-Type: text/plain; charset=&quot;iso-8859-1&quot;', &quot;Content-Transfer-Encoding: 8bit&quot;,
    $message,
    &quot;--&quot; . $boundary, // content boundary delimiter line 
    'Content-Type: application/octet-stream; name=&quot;RenamedFile.pdf&quot;', 
    &quot;Content-Transfer-Encoding: base64&quot;,
    &quot;Content-Disposition: attachment&quot;,
    $content,
    &quot;--&quot; . $boundary . &quot;--&quot; // closing boundary delimiter line
]);

$result = mail($to, $subject, $message, $headers); // send the email

if ($result) {
// Success! Redirect to a thank you page. Use the
// POST/REDIRECT/GET pattern to prevent form resubmissions // when a user refreshes the page.
    header('Location: http://example.com/path/to/thank-you.php', true, 303);
    exit; 
}  else {
// Your mail was not sent. Check your logs to see if // the reason was reported there for you.
}
</code></pre>

<p><strong>内容传输加密</strong></p>

<p>有效的加密方式包括<em>7bit</em>, <em>8bit</em>, <em>binary</em>, <em>quoted-printable</em>, <em>base64</em>, <em>ietf-token</em>, 和 *x-token*。在这些加密方式中，当有一个Multipart的Content-Type的头，Content-Transfer-Encoding必须不能是RFC2015第6.4部分记录的<em>7bit</em>, <em>8bit</em>, 或 *binary*。</p>

<p>在例子中使用7bit编码（代表US-ASCII字符）作为multipart头部分，因为正如RFC2045第5节描述的，某些协议只支持这种编码。然后可以对边界内的数据进行逐部分编码（RFC2046，第5.1节）。这个例子就是这样做的。第一部分包含文本/纯文本消息，由于可能需要支持其他字符，因此定义为8位。在这种情况下，将使用Latin1（ISO-8859-1）字符集。第二部分是附件，因此它被定义为base64编码的应用程序/octet流。由于base64将任意数据转换为7bit范围，因此可以通过受限传输（RFC2045，第6.2节）发送。</p>

<h3 id="4-phpmailer发送纯文本文件">4. PHPMailer发送纯文本文件</h3>

<p><strong>基础文本文件</strong></p>

<pre><code class="language-php">&lt;?php
$mail = new PHPMailer();
$mail-&gt;From     = &quot;from@example.com&quot;;
$mail-&gt;FromName = &quot;Full Name&quot;;
$mail-&gt;addReplyTo(&quot;reply@example.com&quot;, &quot;Reply Address&quot;);
$mail-&gt;Subject  = &quot;Subject Text&quot;;
$mail-&gt;Body     = &quot;This is a sample basic text email using PHPMailer.&quot;;
if($mail-&gt;send()) {
// Success! Redirect to a thank you page. Use the
// POST/REDIRECT/GET pattern to prevent form resubmissions
// when a user refreshes the page.
    header('Location: http://example.com/path/to/thank-you.php', true, 303);
    exit; 
} else {
    echo &quot;Mailer Error: &quot; . $mail-&gt;ErrorInfo;
}
</code></pre>

<p><strong>增加额外的收件人，CC收件人，BCC收件人</strong></p>

<pre><code class="language-php">&lt;?php
$mail = new PHPMailer();
$mail-&gt;From     = &quot;from@example.com&quot;;
$mail-&gt;FromName = &quot;Full Name&quot;;
$mail-&gt;addReplyTo(&quot;reply@example.com&quot;, &quot;Reply Address&quot;);
$mail-&gt;addAddress(&quot;recepient1@example.com&quot;, &quot;Recepient Name&quot;);
$mail-&gt;addAddress(&quot;recepient2@example.com&quot;);
$mail-&gt;addCC(&quot;cc@example.com&quot;);
$mail-&gt;addBCC(&quot;bcc@example.com&quot;);
$mail-&gt;Subject  = &quot;Subject Text&quot;;
$mail-&gt;Body     = &quot;This is a sample basic text email using PHPMailer.&quot;;
if($mail-&gt;send()) {
// Success! Redirect to a thank you page. Use the
// POST/REDIRECT/GET pattern to prevent form resubmissions // when a user refreshes the page.
    header('Location: http://example.com/path/to/thank-you.php', true, 303);
    exit;
} else {
    echo &quot;Error: &quot; . $mail-&gt;ErrorInfo;
}
</code></pre>

<h3 id="5-phpmailer发送html邮件">5. PHPMailer发送HTML邮件</h3>

<pre><code class="language-php">&lt;?php
$mail = new PHPMailer();
$mail-&gt;From     = &quot;from@example.com&quot;;
$mail-&gt;FromName = &quot;Full Name&quot;;
$mail-&gt;addReplyTo(&quot;reply@example.com&quot;, &quot;Reply Address&quot;);
$mail-&gt;addAddress(&quot;recepient1@example.com&quot;, &quot;Recepient Name&quot;);
$mail-&gt;addAddress(&quot;recepient2@example.com&quot;);
$mail-&gt;addCC(&quot;cc@example.com&quot;);
$mail-&gt;addBCC(&quot;bcc@example.com&quot;);
$mail-&gt;Subject = &quot;Subject Text&quot;;
$mail-&gt;isHTML(true);
$mail-&gt;Body = &quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;&lt;b&gt;This paragraph is bold.&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;This text is italic.&lt;/i&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;;
$mail-&gt;AltBody = &quot;This paragraph is not bold.\n\nThis text is not italic.&quot;;
if($mail-&gt;send()) {
// Success! Redirect to a thank you page. Use the
// POST/REDIRECT/GET pattern to prevent form resubmissions // when a user refreshes the page.
    header('Location: http://example.com/path/to/thank-you.php', true, 303);
    exit;
} else {
    echo &quot;Error: &quot; . $mail-&gt;ErrorInfo;
}
</code></pre>

<h3 id="5-phpmailer发送附件邮件">5. PHPMailer发送附件邮件</h3>

<pre><code class="language-php">&lt;?php
$mail = new PHPMailer();
$mail-&gt;From     = &quot;from@example.com&quot;;
$mail-&gt;FromName = &quot;Full Name&quot;;
$mail-&gt;addReplyTo(&quot;reply@example.com&quot;, &quot;Reply Address&quot;);
$mail-&gt;Subject  = &quot;Subject Text&quot;;
$mail-&gt;Body     = &quot;This is a sample basic text email with an attachment using PHPMailer.&quot;;
// Add Static Attachment
$attachment = '/path/to/your/file.pdf';
$mail-&gt;AddAttachment($attachment , 'RenamedFile.pdf');
// Add Second Attachment, run-time created. ie: CSV to be open with Excel
$csvHeader = &quot;header1,header2,header3&quot;;
$csvData = &quot;row1col1,row1col2,row1col3\nrow2col1,row2col2,row2col3&quot;;
$mail-&gt;AddStringAttachment($csvHeader .&quot;\n&quot; . $csvData, 'your-csv-file.csv', 'base64', 'application/vnd.ms-excel');
if($mail-&gt;send()) {
// Success! Redirect to a thank you page. Use the
// POST/REDIRECT/GET pattern to prevent form resubmissions // when a user refreshes the page.
    header('Location: http://example.com/path/to/thank-you.php', true, 303);
    exit; 
} else {
    echo &quot;Error: &quot; . $mail-&gt;ErrorInfo;
}
</code></pre>

<h3 id="7-使用sendgrid发送文本邮件">7. 使用Sendgrid发送文本邮件</h3>

<p><strong>基础文本邮件</strong></p>

<pre><code class="language-php">&lt;?php
$sendgrid = new SendGrid(&quot;YOUR_SENDGRID_API_KEY&quot;);
$email = new SendGrid\Email();
$email-&gt;addTo(&quot;recipient@example.com&quot;)
      -&gt;setFrom(&quot;sender@example.com&quot;)
      -&gt;setSubject(&quot;Subject Text&quot;)
      -&gt;setText(&quot;This is a sample basic text email using &quot;);
$sendgrid-&gt;send($email);
</code></pre>

<p><strong>增加额外的收件人，CC收件人，BCC收件人</strong></p>

<pre><code class="language-php">&lt;?php
$sendgrid = new SendGrid(&quot;YOUR_SENDGRID_API_KEY&quot;);
$email = new SendGrid\Email();
$email-&gt;addTo(&quot;recipient@example.com&quot;)
      -&gt;setFrom(&quot;sender@example.com&quot;)
      -&gt;setSubject(&quot;Subject Text&quot;)
      -&gt;setHtml(&quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;&lt;b&gt;This paragraph is bold.&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;This text is
italic.&lt;/i&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;);
$personalization = new Personalization();
$email = new Email(&quot;Recepient Name&quot;, &quot;recepient1@example.com&quot;);
$personalization-&gt;addTo($email);
$email = new Email(&quot;RecepientCC Name&quot;, &quot;recepient2@example.com&quot;);
$personalization-&gt;addCc($email);
$email = new Email(&quot;RecepientBCC Name&quot;, &quot;recepient3@example.com&quot;); 
$personalization-&gt;addBcc($email); 
$email-&gt;addPersonalization($personalization);
$sendgrid-&gt;send($email);
</code></pre>

<h3 id="7-sendgrid发送附件邮件">7. Sendgrid发送附件邮件</h3>

<pre><code class="language-php">&lt;?php
$sendgrid = new SendGrid(&quot;YOUR_SENDGRID_API_KEY&quot;);
$email = new SendGrid\Email();
$email-&gt;addTo(&quot;recipient@example.com&quot;)
      -&gt;setFrom(&quot;sender@example.com&quot;)
      -&gt;setSubject(&quot;Subject Text&quot;)
      -&gt;setText(&quot;This is a sample basic text email using &quot;);
$attachment = '/path/to/your/file.pdf';
$content    = file_get_contents($attachment);
$content    = chunk_split(base64_encode($content));
$attachment = new Attachment();
$attachment-&gt;setContent($content);
$attachment-&gt;setType(&quot;application/pdf&quot;);
$attachment-&gt;setFilename(&quot;RenamedFile.pdf&quot;); 
$attachment-&gt;setDisposition(&quot;attachment&quot;); 
$email-&gt;addAttachment($attachment);
$sendgrid-&gt;send($email);
</code></pre>

<p>参考：<a href="https://goalkicker.com/PHPBook">PHP® Notes for Professionals book</a></p>

        
                
        
              <hr>
              <ul class="pager">
                  
                  <li class="previous">
                      <a href="/2019/06/post/mysql-section-49.html" data-toggle="tooltip" data-placement="top" title="MySQL专业笔记(四十九)">&larr; Previous Post</a>
                  </li>
                  
                  
                  <li class="next">
                      <a href="/2019/06/post/mysql-section-50.html" data-toggle="tooltip" data-placement="top" title="MySQL专业笔记(五十)">Next Post &rarr;</a>
                  </li>
                  
              </ul>
  
              
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">特色标签</a></h5>
                    <div class="tags">
                        
                        
                        
                        <a href="/tags/bash" title="bash">
                        bash
                        </a>
                        
                        
                        
                        <a href="/tags/git" title="git">
                        git
                        </a>
                        
                        
                        
                        <a href="/tags/go" title="go">
                        go
                        </a>
                        
                        
                        
                        <a href="/tags/hugo" title="hugo">
                        hugo
                        </a>
                        
                        
                        
                        <a href="/tags/java" title="java">
                        java
                        </a>
                        
                        
                        
                        <a href="/tags/mysql" title="mysql">
                        mysql
                        </a>
                        
                        
                        
                        <a href="/tags/php" title="php">
                        php
                        </a>
                        
                        
                    </div>
                </section>
                

                
                
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                    
                    
                    
                    
                    

                    

		    
                    
                    
                    
                    
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; 怀府小阁 , 2019
                    <br>

                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>




<script>
    
    var _baId = '60e88bb5add74ae0f8d6971f23b916ce';

    
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>




</body>
</html>
